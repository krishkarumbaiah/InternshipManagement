<div class="container mt-4 assignments-wrapper">
  <h2 class="page-title">👨‍🎓 Assign Interns to Batches</h2>

  <!-- Assignment Form -->
  <form (ngSubmit)="assignUser()" class="row g-4 mt-4 assignment-form">
    <!-- User Dropdown -->
    <div class="col-md-4">
      <label class="form-label fw-bold">Select Intern</label>
      <select [(ngModel)]="selectedUser" name="user" class="form-select custom-select" required>
        <option value="" disabled selected>-- Choose Intern --</option>
        <option *ngFor="let user of users" [value]="user.id">
          {{ user.userName }} ({{ user.email }})
        </option>
      </select>
    </div>

    <!-- Batch Dropdown -->
    <div class="col-md-4">
      <label class="form-label fw-bold">Select Batch</label>
      <select
        [(ngModel)]="selectedBatch"
        name="batch"
        class="form-select custom-select"
        required
        (change)="loadAssignments(selectedBatch!)"
      >
        <option [ngValue]="null" disabled>-- Choose Batch --</option>
        <option *ngFor="let batch of batches" [ngValue]="batch.id">
          {{ batch.name }}
        </option>
      </select>
    </div>

    <!-- Assign Button -->
    <div class="col-md-3 d-flex align-items-end">
      <button type="submit" class="btn btn-assign w-100">
        <i class="pi pi-plus-circle"></i> Assign User
      </button>
    </div>
  </form>

  <!-- Assignments Table -->
  <table
    class="table table-bordered table-hover mt-5 custom-assignment-table"
    *ngIf="assignments.length > 0"
  >
    <thead>
      <tr>
        <th>#</th>
        <th>User</th>
        <th>Batch</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let a of assignments; index as i">
        <td>{{ i + 1 }}</td>
        <td class="fw-bold">{{ a.userName }}</td>
        <td>{{ a.batchName }}</td>
        <td>
          <button (click)="unassignUser(a.id)" class="btn btn-unassign btn-sm">
            <i class="pi pi-times-circle"></i> Unassign
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- No Assignments -->
  <p *ngIf="assignments.length === 0 && selectedBatch" class="text-muted text-center mt-4">
    ❌ No users assigned to this batch.
  </p>
</div>
