<div class="container mt-4">
  <h2>Welcome, {{ username }} ðŸ‘‹</h2>
  <p>Your role: <strong>{{ roles.join(', ') }}</strong></p>

  <!-- Admin Dashboard -->
  <div *ngIf="isAdmin()" class="mt-4">
    <h4>Admin Dashboard</h4>

    <div *ngIf="overview; else adminLoading" class="row mt-3">
      <div class="col-md-3 mb-3">
        <div class="card text-white bg-primary shadow">
          <div class="card-body">
            <h5 class="card-title">Users</h5>
            <p class="card-text fs-4">{{ overview.users.total }}</p>
          </div>
        </div>
      </div>

      <div class="col-md-3 mb-3">
        <div class="card text-white bg-success shadow">
          <div class="card-body">
            <h5 class="card-title">Batches</h5>
            <p class="card-text fs-4">{{ overview.batches }}</p>
          </div>
        </div>
      </div>

      <div class="col-md-3 mb-3">
        <div class="card text-white bg-warning shadow">
          <div class="card-body">
            <h5 class="card-title">Questions</h5>
            <p class="card-text fs-4">{{ overview.qnA.total }}</p>
            <small class="text-dark">Unanswered: {{ overview.qnA.unanswered }}</small>
          </div>
        </div>
      </div>

      <div class="col-md-3 mb-3">
        <div class="card text-white bg-danger shadow">
          <div class="card-body">
            <h5 class="card-title">Attendance</h5>
            <p class="card-text fs-4">{{ overview.attendance.presentRate | number:'1.0-2' }}%</p>
            <small class="text-light">Records: {{ overview.attendance.totalRecords }}</small>
          </div>
        </div>
      </div>
    </div>

    <ng-template #adminLoading>
      <p class="text-muted">Loading admin dashboard data...</p>
    </ng-template>
  </div>

  <!-- Intern Dashboard -->
  <div *ngIf="isIntern()" class="mt-4">
    <h4>Intern Dashboard</h4>

    <div *ngIf="myOverview; else internLoading" class="row mt-3">
      <div class="col-md-6 mb-3">
        <div class="card text-white bg-info shadow">
          <div class="card-body">
            <h5 class="card-title">Attendance</h5>
            <p class="card-text fs-4">{{ myOverview.attendance.presentRate | number:'1.0-2' }}%</p>
            <small class="text-light">Present: {{ myOverview.attendance.presentDays }} / {{ myOverview.attendance.totalDays }}</small>
          </div>
        </div>
      </div>

      <div class="col-md-6 mb-3">
        <div class="card text-white bg-secondary shadow">
          <div class="card-body">
            <h5 class="card-title">QnA</h5>
            <p class="card-text fs-4">{{ myOverview.questions.total }} asked</p>
            <small class="text-light">Answered: {{ myOverview.questions.answered }} | Unanswered: {{ myOverview.questions.unanswered }}</small>
          </div>
        </div>
      </div>
    </div>

    <ng-template #internLoading>
      <p class="text-muted">Loading intern dashboard data...</p>
    </ng-template>
  </div>

  <button class="btn btn-danger mt-4" (click)="logout()">Logout</button>
</div>
