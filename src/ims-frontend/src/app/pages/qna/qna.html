<div class="container mt-4 qna-wrapper">
  <h2 class="page-title">ğŸ’¬ QnA</h2>

  <!-- Ask Question -->
  <form (ngSubmit)="askQuestion()" class="mb-4 ask-form">
    <div class="input-group">
      <input
        type="text"
        [(ngModel)]="newQuestion"
        name="question"
        class="form-control custom-input"
        placeholder="âœï¸ Type your question..."
        required
      />
      <button class="btn btn-ask">Ask</button>
    </div>
  </form>

  <!-- My Questions -->
  <h4 class="section-title">ğŸ™‹ My Questions</h4>
  <ul class="list-group mb-4 custom-list" *ngIf="myQuestions.length > 0; else noMyQ">
    <li class="list-group-item qna-item" *ngFor="let q of myQuestions">
      
      <!-- Editing Mode -->
      <div *ngIf="editingQuestionId === q.id; else viewMode">
        <input
          type="text"
          [(ngModel)]="editedText"
          name="editText"
          class="form-control mb-2"
        />
        <button class="btn btn-save me-2 btn-sm" (click)="saveEdit(q.id)">ğŸ’¾ Save</button>
        <button class="btn btn-cancel btn-sm" (click)="cancelEdit()">âŒ Cancel</button>
      </div>

      <!-- Normal View -->
      <ng-template #viewMode>
        <p class="question-text"><strong>{{ q.text }}</strong></p>
        <div *ngIf="q.answer" class="answer-text">âœ… Answer: {{ q.answer }}</div>
        <div class="text-muted small">{{ q.createdAt | date:'short' }}</div>

        <!-- Edit / Delete Buttons -->
        <div class="mt-2">
          <button class="btn btn-edit btn-sm me-2" (click)="startEdit(q)">âœï¸ Edit</button>
          <button class="btn btn-delete btn-sm" (click)="deleteQuestion(q.id)">ğŸ—‘ Delete</button>
        </div>
      </ng-template>
    </li>
  </ul>
  <ng-template #noMyQ>
    <p class="text-muted">You havenâ€™t asked any questions yet.</p>
  </ng-template>

  <!-- All Questions -->
  <h4 class="section-title">ğŸŒ All Questions</h4>
  <ul class="list-group custom-list" *ngIf="allQuestions.length > 0; else noQ">
    <li class="list-group-item qna-item" *ngFor="let q of allQuestions">
      <p><strong class="username">{{ q.userName }}</strong>: {{ q.text }}</p>
      <div *ngIf="q.answer" class="answer-text">âœ… Answer: {{ q.answer }}</div>
    </li>
  </ul>
  <ng-template #noQ>
    <p class="text-muted">No questions found.</p>
  </ng-template>
</div>
